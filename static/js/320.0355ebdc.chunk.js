"use strict";(self.webpackChunkhomebase=self.webpackChunkhomebase||[]).push([[320],{4494:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(5043);const s="typewriter_blink__KoZUv";var o=n(2644),a=n(579);const i=e=>{var t;let{phrases:n,period:i=2e3,typingSpeed:l,deletingSpeed:c,loop:u=!0,preserveTrailingNewlines:d=!1}=e;const[m,h]=(0,r.useState)("typing"),[p,f]=(0,r.useState)(0),[g,v]=(0,r.useState)(0),{linkColor:x}=(0,o.l)();(0,r.useEffect)((()=>{h("typing"),f(0),v(0)}),[n]);const y=!u&&p===n.length-1,j=null!==(t=n[p])&&void 0!==t?t:"",S=y?"":n[(p+1)%n.length];let A=function(e,t){let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];)n++;return n}(j,S);d&&(A=function(e,t){if(t>=e.length)return t;const n=e.slice(t);return/^[\n\s]+$/.test(n)?e.length:t}(j,A)),(0,r.useEffect)((()=>{if("typing"===m){if(g<j.length){const e=j[g];let t=l;"."!==e&&"\n"!==e||(t*=2);const n=setTimeout((()=>{v((e=>e+1))}),t);return()=>clearTimeout(n)}{const e=setTimeout((()=>{h("pause")}),i);return()=>clearTimeout(e)}}if("pause"===m){if(y)return;h("deleting")}else if("deleting"===m){if(g>A){const e=j[g-1];let t=c;"."!==e&&"\n"!==e||(t*=2);const n=setTimeout((()=>{v((e=>e-1))}),t);return()=>clearTimeout(n)}f((e=>u?(e+1)%n.length:e+1)),h("typing")}}),[m,g,j,A,i,l,c,p,S,y,u,n.length]);const w=j.slice(0,g);return(0,a.jsxs)("div",{children:[(C=w,C.split("\n").map(((e,t,n)=>(0,a.jsxs)("span",{children:[e,t<n.length-1&&(0,a.jsx)("br",{})]},t)))),(0,a.jsx)("span",{className:"border-r-[2.5px] solid ml-[1.8px] ".concat(s),style:{borderColor:x}})]});var C}},6320:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Q});var r=n(4292),s=n(2991),o=n(5096),a=n(9904),i=n(5043),l=n(1893),c=n(3075),u=n(2186),d=n(2851),m=n(3003);const h=m.d4;function p(e){return e.flatMap((e=>function(e){const t=[];for(let n=0;n<e.length-1;n++)t.push({start:e[n],end:e[n+1]});return t}(e.legs)))}function f(e){if(0===e.length)return[];const t=[];t.push(e[0].start);for(let n=0;n<e.length;n++)t.push(e[n].end);return t}const g=[{id:"nyc-dallas",title:"NYC \u2192 Dallas",description:"A short trip to Dallas to escape the winter cold.",startDate:"2021-01-05",endDate:"2021-01-10",images:["https://example.com/dallas1.jpg","https://example.com/dallas2.jpg"],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:32.7767,lon:-96.797,name:"Dallas",iso:"USA"}]},{id:"nyc-sf",title:"NYC \u2192 San Francisco",description:"Coast-to-coast weekend getaway.",startDate:"2021-02-10",endDate:"2021-02-15",images:["https://example.com/sf1.jpg","https://example.com/sf2.jpg"],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:37.7749,lon:-122.4194,name:"San Francisco",iso:"USA"}]},{id:"nyc-louisville-1",title:"NYC \u2192 Louisville",description:"A quick trip for bourbon and horse racing.",startDate:"2021-03-05",endDate:"2021-03-10",images:["https://example.com/louisville1.jpg"],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:38.2527,lon:-85.7585,name:"Louisville",iso:"USA"}]},{id:"nyc-seattle",title:"NYC \u2192 Seattle",description:"Coffee and rain in the Pacific Northwest.",startDate:"2021-04-01",endDate:"2021-04-07",images:[],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:47.6062,lon:-122.3321,name:"Seattle",iso:"USA"}]},{id:"nyc-bogota-cumaral-cartagena",title:"NYC \u2192 Bogota \u2192 Cumaral \u2192 Cartagena",description:"Exploring Colombia, from the capital to the countryside to the coast.",startDate:"2021-05-10",endDate:"2021-05-25",images:["https://example.com/bogota.jpg","https://example.com/cartagena.jpg"],countries:["COL"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:4.711,lon:-74.0721,name:"Bogota",iso:"COL"},{lat:4.2702,lon:-73.4772,name:"Cumaral",iso:"COL"},{lat:10.391,lon:-75.4794,name:"Cartagena",iso:"COL"}]},{id:"nyc-destin",title:"NYC \u2192 Destin",description:"Relaxing on the Emerald Coast.",startDate:"2021-06-01",endDate:"2021-06-05",images:["https://example.com/destin.jpg"],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:30.3935,lon:-86.4958,name:"Destin",iso:"USA"}]},{id:"nyc-sanjose",title:"NYC \u2192 San Jose, CA",description:"Visiting Silicon Valley.",startDate:"2021-07-01",endDate:"2021-07-07",images:[],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:37.3382,lon:-121.8863,name:"San Jose, CA",iso:"USA"}]},{id:"nyc-nashville-louisville",title:"NYC \u2192 Nashville \u2192 Louisville",description:"From Music City to Derby City.",startDate:"2021-08-10",endDate:"2021-08-20",images:["https://example.com/nashville.jpg","https://example.com/louisville2.jpg"],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:36.1627,lon:-86.7816,name:"Nashville",iso:"USA"},{lat:38.2527,lon:-85.7585,name:"Louisville",iso:"USA"}]},{id:"nyc-london-zurich-copenhagen-bern",title:"NYC \u2192 London \u2192 Zurich \u2192 Copenhagen \u2192 Bern",description:"European adventure through the UK, Switzerland, and Denmark.",startDate:"2021-09-05",endDate:"2021-09-25",images:["https://example.com/london.jpg","https://example.com/zurich.jpg"],countries:["GBR","CHE","DNK"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:51.5074,lon:-.1278,name:"London",iso:"GBR"},{lat:47.3769,lon:8.5417,name:"Zurich",iso:"CHE"},{lat:55.6761,lon:12.5683,name:"Copenhagen",iso:"DNK"},{lat:46.948,lon:7.4474,name:"Bern",iso:"CHE"}]},{id:"nyc-reykjavik",title:"NYC \u2192 Reykjavik",description:"Checking out Iceland's capital city.",startDate:"2021-10-01",endDate:"2021-10-05",images:["https://example.com/reykjavik.jpg"],countries:["ISL"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:64.1466,lon:-21.9426,name:"Reykjavik",iso:"ISL"}]},{id:"nyc-louisville-2",title:"NYC \u2192 Louisville",description:"A second trip back for more Kentucky experiences.",startDate:"2021-11-01",endDate:"2021-11-05",images:[],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:38.2527,lon:-85.7585,name:"Louisville",iso:"USA"}]},{id:"nyc-louisville-3",title:"NYC \u2192 Louisville (Part 3)",description:"Yet another Louisville trip.",startDate:"2021-12-05",endDate:"2021-12-10",images:["https://example.com/louisville3.jpg"],countries:["USA"],legs:[{lat:40.7128,lon:-74.006,name:"New York City",iso:"USA"},{lat:38.2527,lon:-85.7585,name:"Louisville",iso:"USA"}]}];var v=n(9435);const x=(e,t,n)=>{const r=(90-e)*(Math.PI/180),s=(t+180)*(Math.PI/180),o=-n*Math.sin(r)*Math.cos(s),a=n*Math.sin(r)*Math.sin(s),i=n*Math.cos(r);return new v.Pq0(o,i,a)};var y=n(579);const j=e=>{let{flights:t,color:n,radius:r,behavior:s}=e;const[o,a]=(0,i.useState)(s?0:1);(0,i.useEffect)((()=>{if("flicker"===s){let e=0;const t=100,n=1e3,r=setInterval((()=>{e+=t,a(Math.random()<.5?0:1),e>=n&&(clearInterval(r),a(1))}),t);return()=>clearInterval(r)}if("smooth"===s){let e=null;const t=performance.now(),n=1e3,r=s=>{const o=s-t,i=Math.min(o/n,1);a(i),i<1&&(e=requestAnimationFrame(r))};return e=requestAnimationFrame(r),()=>{e&&cancelAnimationFrame(e)}}a(1)}),[s]);const l=(0,i.useMemo)((()=>t.map((e=>((e,t,n,r,s)=>{const o=x(e,t,s),a=x(n,r,s),i=(new v.Pq0).addVectors(o,a).multiplyScalar(.5),l=1.5*o.distanceTo(a);i.setLength(i.length()+l);const c=(new v.Pq0).lerpVectors(o,i,.25),u=(new v.Pq0).lerpVectors(o,i,.75),d=new v.s0K(o,c,u,a);return new v.j6(d,64,.5,8,!1)})(e.start.lat,e.start.lon,e.end.lat,e.end.lon,r)))),[t,r]);return(0,y.jsx)(y.Fragment,{children:l.map(((e,t)=>(0,y.jsx)("mesh",{geometry:e,children:(0,y.jsx)("meshBasicMaterial",{color:n,transparent:!0,opacity:o})},t)))})},S=e=>{let{position:t,color:n="#ffffff",onDone:r}=e;const s=(0,i.useRef)(null),o=(0,i.useRef)(null),a=(0,i.useRef)(null),l=1.3,[u,d]=(0,i.useState)(0),[m,h]=(0,i.useState)(0),[p,f]=(0,i.useState)(1);return(0,i.useEffect)((()=>{if(0===t.lengthSq())return;const e=t.clone().normalize(),n=new v.Pq0(0,0,1),r=(new v.PTz).setFromUnitVectors(n,e);s.current.quaternion.copy(r)}),[t]),(0,c.D)((()=>{d(u+.06*(1-u));const e=m+.06*(1-m);h(e);f(1-e),e>.98&&(null===r||void 0===r||r())})),(0,y.jsxs)("group",{ref:s,position:t,children:[(0,y.jsxs)("mesh",{ref:o,scale:[u*l,u*l,u*l],children:[(0,y.jsx)("circleGeometry",{args:[1,64]}),(0,y.jsx)("meshBasicMaterial",{color:n,transparent:!0,opacity:1})]}),(0,y.jsxs)("mesh",{ref:a,scale:[m*l,m*l,m*l],children:[(0,y.jsx)("ringGeometry",{args:[2.95,3.1,64]}),(0,y.jsx)("meshBasicMaterial",{color:n,transparent:!0,opacity:p,side:v.$EB,depthTest:!0})]})]})};class A extends v.Ipv{constructor(e,t,n){super(),this.baseCurve=void 0,this.minT=void 0,this.maxT=void 0,this.baseCurve=e,this.minT=t,this.maxT=n}getPoint(e,t){const n=this.minT+(this.maxT-this.minT)*e;return this.baseCurve.getPoint(n,t)}}const w=e=>{let{color:t,startLat:n,startLon:r,endLat:s,endLon:o,radius:a,animationDuration:l=2500,onDone:u,onProgressPersist:d=!1}=e;const m=(0,i.useRef)(null),h=(0,i.useRef)(null),[p,f]=(0,i.useState)(!1),[g]=(0,i.useState)((()=>performance.now())),[j,w]=(0,i.useState)(!1),C=(0,i.useMemo)((()=>x(n,r,a)),[n,r,a]),D=(0,i.useMemo)((()=>x(s,o,a)),[s,o,a]),b=(0,i.useMemo)((()=>{const e=(new v.Pq0).addVectors(C,D).multiplyScalar(.5),t=1.5*C.distanceTo(D);e.setLength(e.length()+t);const n=(new v.Pq0).lerpVectors(C,e,.25),r=(new v.Pq0).lerpVectors(C,e,.75);return new v.s0K(C,n,r,D)}),[C,D]),k=(0,i.useMemo)((()=>new v.j6(b,64,.5,8,!1)),[b]);return(0,i.useMemo)((()=>{h.current=k}),[k]),(0,c.D)((()=>{if(p)return;let e=(performance.now()-g)/l;if(e>1&&(e=1),d){const t=h.current.index?h.current.index.count:h.current.attributes.position.count,n=Math.floor(t*e);h.current.setDrawRange(0,n),e>=1&&(h.current.setDrawRange(0,t),j||w(!0),f(!0),null===u||void 0===u||u())}else{if(!m.current)return;let t=0,n=0;e<=.5?(t=e/.5,n=0):(t=1,n=(e-.5)/.5,j||w(!0));const r=n,s=t;if(s<=r)m.current.visible=!1;else{m.current.visible=!0;const e=new A(b,r,s),t=new v.j6(e,64,.5,8,!1);m.current.geometry&&m.current.geometry.dispose(),m.current.geometry=t}e>=1&&(m.current.visible=!1,f(!0),null===u||void 0===u||u())}})),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("mesh",{ref:m,children:[d?(0,y.jsx)("primitive",{object:k,attach:"geometry"}):null,(0,y.jsx)("meshBasicMaterial",{color:t,transparent:!0,opacity:.9})]}),j&&(0,y.jsx)(S,{position:D,color:"#ffcd53",onDone:()=>w(!1)})]})},C=e=>{let{locationArray:t,sequential:n=!1,color:r,radius:s,animationDuration:o=2500,firstAnimationDuration:a,onProgressPersist:l=!0,onAllArcsDone:c="persist",persistArcBehavior:u}=e;const[d,m]=(0,i.useState)(0),[h,p]=(0,i.useState)(0),[f,g]=(0,i.useState)(Array(t.length).fill(!1)),[v,x]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{if(h===t.length&&t.length>0)switch(c){case"remove":g(Array(t.length).fill(!0));break;case"reset":setTimeout((()=>{m(0),p(0),g(Array(t.length).fill(!1)),x(!1)}),500);break;case"persist":x(!0)}}),[h,t.length,c]),(0,y.jsxs)(y.Fragment,{children:[!v&&t.map(((e,t)=>{if(n&&t>d)return null;if(f[t]&&!l)return null;const i=0===t&&a?a:o;return(0,y.jsx)(w,{color:r,startLat:e.start.lat,startLon:e.start.lon,endLat:e.end.lat,endLon:e.end.lon,radius:s+.1,onProgressPersist:l,animationDuration:i,onDone:()=>{g((e=>{const n=[...e];return n[t]=!0,n})),p((e=>e+1)),n&&t===d&&setTimeout((()=>{m((e=>e+1))}),500)}},t)})),v&&(0,y.jsx)(j,{flights:t,color:r,radius:s+.1,behavior:u})]})};var D=n(9379);const b={uniforms:{uColor:{value:new v.Q1f("#00aaff")},uIntensity:{value:1},uPower:{value:2}},vertexShader:"\n    varying vec3 vNormal;\n    void main() {\n      vNormal = normalize(normal);\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n  ",fragmentShader:"\n    uniform vec3 uColor;\n    uniform float uIntensity;\n    uniform float uPower;\n    varying vec3 vNormal;\n    \n    void main() {\n      // Fresnel-like term: how perpendicular the normal is to the view direction\n      float intensity = pow(1.0 - dot(vNormal, vec3(0.0, 0.0, 1.0)), uPower);\n      gl_FragColor = vec4(uColor, intensity * uIntensity);\n    }\n  "},k=e=>{let{earthRadius:t,color:n,opacity:r}=e;const s=(0,i.useRef)(null);return(0,y.jsxs)("mesh",{ref:s,children:[(0,y.jsx)("sphereGeometry",{args:[1.018*t,80,80]}),(0,y.jsx)("shaderMaterial",{side:v.hsX,transparent:!0,depthWrite:!1,uniforms:(0,D.A)((0,D.A)({},b.uniforms),{},{uColor:{value:new v.Q1f(n)},uIntensity:{value:1.2},uPower:{value:2}}),vertexShader:b.vertexShader,fragmentShader:b.fragmentShader,opacity:r})]})},P=e=>{let{radius:t}=e;return(0,y.jsxs)("mesh",{children:[(0,y.jsx)("sphereGeometry",{args:[t,64,64]}),(0,y.jsx)("meshStandardMaterial",{color:"#0b2a57",emissive:"#081c3c",emissiveIntensity:.3,roughness:.45})]})},R=e=>{let{position:t,color:n,markerSize:r}=e;const s=(0,i.useRef)(null),o=(0,i.useMemo)((()=>t.clone().normalize()),[t]);return(0,i.useEffect)((()=>{if(!s.current)return;const e=new v.Pq0(0,0,1),n=(new v.PTz).setFromUnitVectors(e,o);s.current.quaternion.copy(n),s.current.position.copy(t)}),[o,t]),(0,y.jsxs)("group",{ref:s,children:[(0,y.jsxs)("mesh",{children:[(0,y.jsx)("circleGeometry",{args:[r,32]}),(0,y.jsx)("meshBasicMaterial",{color:n,side:v.$EB})]}),(0,y.jsx)(M,{baseRadius:1*r,color:n})]})};function M(e){let{baseRadius:t,color:n}=e;const r=(0,i.useRef)(null);return(0,c.D)(((e,t)=>{if(!r.current)return;r.current.userData.elapsed||(r.current.userData.elapsed=0),r.current.userData.elapsed+=t;let n=r.current.userData.elapsed/2.2;n>1&&(r.current.userData.elapsed=0,n=0);const s=1+1.5*n,o=1-n;r.current.scale.set(s,s,s);r.current.material.opacity=o})),(0,y.jsxs)("mesh",{ref:r,children:[(0,y.jsx)("ringGeometry",{args:[1*t,1.5*t,64]}),(0,y.jsx)("meshBasicMaterial",{color:n,transparent:!0,opacity:1,side:v.$EB})]})}const N=e=>{let{cities:t,radius:n,color:r="#ffcd53",markerSize:s=1.5}=e;const o=(0,i.useMemo)((()=>{const e=new Map;for(const n of t)e.set(n.name,n);return Array.from(e.values())}),[t]);return(0,y.jsx)(y.Fragment,{children:o.map(((e,t)=>{const o=x(e.lat,e.lon,n);return(0,y.jsx)(R,{position:o,color:r,markerSize:s},e.name+t)}))})};var U=n(8270);const z=e=>{let{isoA3:t,dots:n}=e;const r=n.filter((e=>e.isoA3===t));if(!r.length)return null;let s=0,o=0,a=0;for(const l of r)s+=l.x,o+=l.y,a+=l.z;const i=r.length;return new v.Pq0(s/i,o/i,a/i)},L=e=>{let{camera:t,controls:n,targetPos:r,distanceOffset:s=300}=e;const o=r.clone().normalize().multiplyScalar(r.length()+s);U.Ay.to(t.position,{x:o.x,y:o.y,z:o.z,duration:1,ease:"power2.inOut",onUpdate:()=>{n.update()}})};function T(e){if(!e.intersections||0===e.intersections.length)return null;return e.intersections.sort(((e,t)=>e.distance-t.distance))[0]}const Y=e=>{let{jsonUrl:t,pointSize:n,onCountrySelect:r,onLoaded:s,dotColor:o,highlightColor:a="#FFFF00",globeRef:u,controlsRef:m,cameraRef:p}=e;const f=h(d.mo),[g,x]=(0,i.useState)([]),j=(0,i.useRef)(null),S=(0,i.useRef)(null),A=(0,i.useRef)(null),w=(0,i.useRef)(!1),C=(0,i.useRef)(null),D=(0,l.A)("sm"),[b,k,P]=(0,i.useMemo)((()=>{const e=new v.Q1f(o);return[e.r,e.g,e.b]}),[o]),[R,M,N]=(0,i.useMemo)((()=>{const e=new v.Q1f(a);return[e.r,e.g,e.b]}),[a]);(0,i.useEffect)((()=>{(async()=>{try{const e=await fetch(t),n=await e.json();console.log("Loaded landDots.json:",n),x(n),null===s||void 0===s||s(!0)}catch(e){console.error("Failed to load landDots.json:",e)}})()}),[t]);const U=(0,i.useCallback)((e=>{if(null===m||void 0===m||!m.current||null===p||void 0===p||!p.current||null===u||void 0===u||!u.current)return;const t=z({isoA3:e,dots:g});if(!t)return;const n=t.clone();u.current.localToWorld(n),L({camera:p.current,controls:m.current,targetPos:n,distanceOffset:D?380:480})}),[p,m,u,g]);(0,i.useEffect)((()=>{f&&0!==g.length?(j.current=f,null!==u&&void 0!==u&&u.current&&U(f)):j.current=null}),[f,g,u,U]);const Y=(0,i.useMemo)((()=>{if(!g.length)return new Float32Array(0);const e=g.flatMap((e=>[e.x,e.y,e.z]));return new Float32Array(e)}),[g]),F=(0,i.useMemo)((()=>{if(!g.length)return new Float32Array(0);const e=[];for(let t=0;t<g.length;t++)e.push(b,k,P);return new Float32Array(e)}),[g,b,k,P]),E=(0,i.useRef)(null),I=(0,i.useCallback)((e=>{var t;A.current={x:e.clientX,y:e.clientY},w.current=!1,C.current=null;const n=T(e);C.current=null!==(t=null===n||void 0===n?void 0:n.index)&&void 0!==t?t:null,e.stopPropagation()}),[]),q=(0,i.useCallback)((e=>{if(!A.current)return;const t=e.clientX-A.current.x,n=e.clientY-A.current.y;Math.sqrt(t*t+n*n)>20&&(w.current=!0),e.stopPropagation()}),[]),B=(0,i.useCallback)((e=>{if(!g.length||!C.current)return;const t=T(e);if(!t)return;if(t.index!==C.current||w.current)return A.current=null,void(C.current=null);const n=t.index,s=g[n];s&&(console.log("Clicked dot #".concat(n," \u2192 Country=").concat(s.countryName,", ISO=").concat(s.isoA3)),null===r||void 0===r||r(s.isoA3),U(s.isoA3),j.current=s.isoA3,S.current&&clearTimeout(S.current),S.current=setTimeout((()=>{j.current=null}),2e3),A.current=null,C.current=null,w.current=!1,e.stopPropagation())}),[g,r,U]);return(0,c.D)((()=>{if(!E.current||!g.length)return;const e=E.current.array;for(let t=0;t<g.length;t++){const n=g[t],r=3*t;j.current===n.isoA3?(e[r]=R,e[r+1]=M,e[r+2]=N):(e[r]=b,e[r+1]=k,e[r+2]=P)}E.current.needsUpdate=!0})),g.length?(0,y.jsxs)("points",{onPointerDown:I,onPointerMove:q,onPointerUp:B,children:[(0,y.jsxs)("bufferGeometry",{children:[(0,y.jsx)("bufferAttribute",{attach:"attributes-position",args:[Y,3],count:Y.length/3,itemSize:3}),(0,y.jsx)("bufferAttribute",{ref:E,attach:"attributes-color",args:[F,3],count:F.length/3,itemSize:3})]}),(0,y.jsx)("pointsMaterial",{vertexColors:!0,size:n,sizeAttenuation:!0,transparent:!0,opacity:.8})]}):null},F=e=>{let{radius:t,rotationSpeed:n,arcs:r,atmosphere:s,dots:o,cityMarkers:a,isInteracting:m}=e;const p=(0,i.useRef)(null),f=(0,l.A)("md"),v=(0,l.A)("sm"),x=(0,l.A)("xs");let j=1;j=f?1:v?.8:x?.7:.6;const[S,A]=(0,i.useState)(.55),[w,D]=(0,i.useState)(!1),b=h(d.mo),[R,M]=(0,i.useState)([]),[U,z]=(0,i.useState)(0);return(0,i.useEffect)((()=>{var e,t;if(M([]),!b)return;console.log("ISO FOCUSED!",b);const n=g.filter((e=>e.countries.includes(b)));console.log("Matched trips",n),z((e=>e+1));const r=n.flatMap((e=>function(e){const t=[],n=e.legs;for(let r=0;r<n.length-1;r++)t.push({start:n[r],end:n[r+1]});return t}(e)));console.log("All arcs",r),M(r),null!==o&&void 0!==o&&null!==(e=o.controlsRef)&&void 0!==e&&e.current&&null!==o&&void 0!==o&&null!==(t=o.cameraRef)&&void 0!==t&&t.current&&p.current}),[b]),(0,c.D)(((e,t)=>{if(!p.current)return;b||(p.current.rotation.y+=n);A((e=>(0,u.Cc)(e,j,2*t)))})),(0,y.jsxs)("group",{visible:w,ref:p,scale:S,children:[(0,y.jsx)(P,{radius:t-1}),!!s&&(0,y.jsx)(k,{earthRadius:t-2,color:s.color,opacity:s.opacity}),!!o&&(0,y.jsx)(Y,{jsonUrl:o.jsonUrl,dotColor:o.dotColor,pointSize:o.pointSize,onLoaded:e=>D(e),globeRef:p,controlsRef:o.controlsRef,cameraRef:o.cameraRef,highlightColor:"white"}),!!a&&(0,y.jsx)(N,{cities:a.cities,radius:a.radius,color:a.color,markerSize:a.markerSize}),!!r&&!R.length&&(0,y.jsx)(C,{animationDuration:r.animationDuration,color:r.color,locationArray:r.locationArray,onAllArcsDone:r.onAllArcsDone,onProgressPersist:r.onProgressPersist,radius:r.radius,sequential:r.sequential,persistArcBehavior:r.persistArcBehavior}),R.length>0&&!!r&&(0,y.jsx)(C,{locationArray:R,color:r.color,radius:V,firstAnimationDuration:1500,animationDuration:500,sequential:!0,onProgressPersist:!1,onAllArcsDone:"remove",persistArcBehavior:void 0},U)]})};var E=n(8892),I=n(1053),q=n(688);const B=e=>{let{bloomStrength:t=.7,bloomRadius:n=.5,bloomThreshold:r=0}=e;const s=(0,i.useRef)(null),{gl:o,scene:a,camera:l,size:u}=(0,c.C)();return(0,i.useEffect)((()=>{const e=new E.s(o);e.setSize(u.width,u.height);const i=new I.A(a,l);e.addPass(i);const c=new q.C(new v.I9Y(u.width,u.height),t,n,r);e.addPass(c),s.current=e}),[o,a,l,u,t,n,r]),(0,c.D)((()=>{var e;null===(e=s.current)||void 0===e||e.render()}),1),null},O=e=>{let{axesHelperRef:t,cameraRef:n}=e;return(0,i.useEffect)((()=>{t.current&&(t.current.visible=!0)}),[t]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("primitive",{ref:t,object:new v.IzY(500).setColors("red","white","blue")}),(0,y.jsx)("gridHelper",{args:[1e3,50]}),(0,y.jsx)("primitive",{object:new v.IWo(new v.eaF(new v.Gu$(V)))}),n.current&&(0,y.jsx)("primitive",{object:new v.WTh(n.current)}),(0,y.jsx)("polarGridHelper",{args:[V,16,8,64]})]})},V=150,G=e=>{let{enableHelpers:t}=e;const n=(0,i.useRef)(null),r=(0,i.useRef)(null),c=(0,i.useRef)(null),{theme:u,setTheme:d}=(0,s.D)();(0,i.useEffect)((()=>{"dark"!==u&&d("dark")}),[u,d]);const m=(0,l.A)("sm")?"/landDots-150rad-40k.json":"/landDots-150rad-30k.json",[h,v]=(0,i.useState)(!1),x=(0,i.useRef)(null),j=(0,l.A)("xl"),S=(0,l.A)("sm");return(0,y.jsxs)(a.Hl,{gl:{alpha:!0},style:{background:"transparent"},camera:{position:[0,150,900],fov:35},onCreated:e=>{c.current=e.camera,e.camera.updateProjectionMatrix();const t=j?.2*e.size.width:0,n=S?0:.07*e.size.height;e.camera.setViewOffset(e.size.width,e.size.height,t,n,e.size.width,e.size.height),e.raycaster.params.Points.threshold=2},children:[(0,y.jsx)(o.N,{ref:n,enableDamping:!0,minDistance:300,minPolarAngle:.3,maxPolarAngle:Math.PI-.3,enablePan:!1,maxDistance:700,onStart:()=>{x.current&&(clearTimeout(x.current),x.current=null),v(!0)},onEnd:()=>{x.current=setTimeout((()=>{v(!1)}),1e3)}}),(0,y.jsx)("ambientLight",{intensity:1}),(0,y.jsx)("hemisphereLight",{intensity:.2,position:[0,50,0]}),(0,y.jsxs)(i.Suspense,{fallback:null,children:[(0,y.jsx)(F,{isInteracting:h,rotationSpeed:.001,radius:V,dots:{dotColor:"#00aaff",pointSize:2.5,jsonUrl:m,controlsRef:n,cameraRef:c},atmosphere:{color:"#00aaff",opacity:.03,earthRadius:V},arcs:{locationArray:p(g),color:"#dd6ff0",radius:V,animationDuration:700,sequential:!1,onProgressPersist:!0,onAllArcsDone:"persist",persistArcBehavior:void 0},cityMarkers:{cities:f(p(g)),radius:V,color:"#dd6ff0",markerSize:1}}),(0,y.jsx)(B,{bloomStrength:1.2,bloomRadius:1,bloomThreshold:.3})]}),t&&(0,y.jsx)(O,{axesHelperRef:r,cameraRef:c})]})};var H=n(4494),K=n(8384),W=n(5705);const $=e=>{let{isos:t}=e;const n=(0,m.wA)(),r=h(d.mo);return(0,y.jsx)(y.Fragment,{children:t.map((e=>(0,y.jsx)(K.T,{size:"md",variant:"light",isIconOnly:!0,onPress:()=>(e=>{n(e===r?(0,d.Ie)(void 0):(0,d.Ie)(e))})(e),children:(0,y.jsx)(W.A,{code:e,hasBorder:!1,size:"l"})},e)))})},_=()=>{const e=function(e){return Array.from(new Set(e.flatMap((e=>{var t;return null!==(t=e.countries)&&void 0!==t?t:[]}))))}(g),t=Array.from(new Set(f(p(g))));return(0,y.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[(0,y.jsx)("div",{className:"absolute inset-0 pointer-events-auto",children:(0,y.jsx)(G,{})}),(0,y.jsx)("div",{className:"flex absolute top-0 right-0 w-full sm:w-1/2 h-full items-end sm:items-center justify-center pointer-events-none z-10",children:(0,y.jsxs)("div",{className:"flex flex-col pointer-events-auto text-2xl items-center px-2 pb-8 sm:text-4xl sm:flex-start sm:pb-0 sm:px-0",children:[(0,y.jsx)("div",{className:"flex mb-2 sm:mb-4",children:(0,y.jsx)(H.A,{phrases:["2024 Travel:","2024 Travel: 3 continents","2024 Travel: ".concat(e.length," countries"),"2024 Travel: ".concat(t.length," cities")],loop:!1,typingSpeed:100,deletingSpeed:50})}),(0,y.jsx)("div",{className:"flex flex-row gap-2",children:(0,y.jsx)($,{isos:e})}),(0,y.jsx)("p",{className:"text-medium sm:text-xl mt-2 max-w-md text-left",children:"Looking back on a year of travel and adventure."})]})})]})},Q=()=>{const{projectSlug:e}=(0,r.g)();return"earth"===e?(0,y.jsx)(_,{}):(0,y.jsx)("div",{children:"Oops! Project not found."})}},1893:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(5043);const s={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1536},o=e=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{function t(){const t=window.innerWidth>=s[e];n((e=>e!==t?t:e))}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)}),[e]),t}}}]);
//# sourceMappingURL=320.0355ebdc.chunk.js.map